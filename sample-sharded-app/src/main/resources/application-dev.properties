# Development Configuration - Uses postgres superuser for simplicity
# This configuration is easier to set up for local development

spring.application.name=sample-sharded-app
server.port=8080

# Disable default auto-configuration for DataSource
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration

# Sharding Configuration with PostgreSQL - Development Mode
# Uses postgres superuser to avoid user creation complexity

# Global Database (for tenant_shard_mapping table)
app.sharding.global-db.url=jdbc:postgresql://localhost:5432/global_db
app.sharding.global-db.username=postgres
app.sharding.global-db.password=
app.sharding.global-db.driver-class-name=org.postgresql.Driver
app.sharding.global-db.hikari.maximum-pool-size=10
app.sharding.global-db.hikari.minimum-idle=2
app.sharding.global-db.hikari.connection-timeout=30s
app.sharding.global-db.hikari.idle-timeout=10m

# Shard 1 Configuration (Latest shard for new signups)
app.sharding.shards.shard1.master.url=jdbc:postgresql://localhost:5432/shard1_db
app.sharding.shards.shard1.master.username=postgres
app.sharding.shards.shard1.master.password=
app.sharding.shards.shard1.master.driver-class-name=org.postgresql.Driver

app.sharding.shards.shard1.replicas.replica1.url=jdbc:postgresql://localhost:5432/shard1_db
app.sharding.shards.shard1.replicas.replica1.username=postgres
app.sharding.shards.shard1.replicas.replica1.password=
app.sharding.shards.shard1.replicas.replica1.driver-class-name=org.postgresql.Driver

app.sharding.shards.shard1.hikari.maximum-pool-size=20
app.sharding.shards.shard1.hikari.minimum-idle=5
app.sharding.shards.shard1.hikari.connection-timeout=30s
app.sharding.shards.shard1.hikari.idle-timeout=10m
app.sharding.shards.shard1.hikari.max-lifetime=30m

app.sharding.shards.shard1.latest=true
app.sharding.shards.shard1.region=us-east-1
app.sharding.shards.shard1.status=ACTIVE

# Shard 2 Configuration
app.sharding.shards.shard2.master.url=jdbc:postgresql://localhost:5432/shard2_db
app.sharding.shards.shard2.master.username=postgres
app.sharding.shards.shard2.master.password=
app.sharding.shards.shard2.master.driver-class-name=org.postgresql.Driver

app.sharding.shards.shard2.replicas.replica1.url=jdbc:postgresql://localhost:5432/shard2_db
app.sharding.shards.shard2.replicas.replica1.username=postgres
app.sharding.shards.shard2.replicas.replica1.password=
app.sharding.shards.shard2.replicas.replica1.driver-class-name=org.postgresql.Driver

app.sharding.shards.shard2.hikari.maximum-pool-size=15
app.sharding.shards.shard2.hikari.minimum-idle=3
app.sharding.shards.shard2.hikari.connection-timeout=30s
app.sharding.shards.shard2.hikari.idle-timeout=10m
app.sharding.shards.shard2.hikari.max-lifetime=30m

app.sharding.shards.shard2.latest=false
app.sharding.shards.shard2.region=us-west-2
app.sharding.shards.shard2.status=ACTIVE

# Tenant Configuration
app.sharding.tenant-column-names=tenant_id,company_id
app.sharding.validation.strictness=STRICT

# Caching Configuration (Caffeine - In-Memory)
app.sharding.cache.enabled=true
app.sharding.cache.type=CAFFEINE
app.sharding.cache.ttl-hours=1
app.sharding.cache.max-size=10000
app.sharding.cache.record-stats=true

# Logging
logging.level.com.valarpirai.sharding=DEBUG
logging.level.com.example.demo=DEBUG
logging.level.com.valarpirai.sharding.cache=INFO
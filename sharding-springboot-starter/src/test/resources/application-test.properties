# Test configuration for sharding library unit tests

# Global Database Configuration (H2 in-memory for testing)
app.sharding.global-db.url=jdbc:h2:mem:test_global_db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
app.sharding.global-db.username=sa
app.sharding.global-db.password=
app.sharding.global-db.driver-class-name=org.h2.Driver
app.sharding.global-db.hikari.maximum-pool-size=5
app.sharding.global-db.hikari.minimum-idle=1

# Shard 1 Configuration (Test Latest Shard)
app.sharding.shard1.master.url=jdbc:h2:mem:test_shard1_master;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
app.sharding.shard1.master.username=sa
app.sharding.shard1.master.password=
app.sharding.shard1.master.driver-class-name=org.h2.Driver

app.sharding.shard1.replica1.url=jdbc:h2:mem:test_shard1_replica1;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
app.sharding.shard1.replica1.username=sa
app.sharding.shard1.replica1.password=
app.sharding.shard1.replica1.driver-class-name=org.h2.Driver

app.sharding.shard1.hikari.maximum-pool-size=10
app.sharding.shard1.hikari.minimum-idle=2
app.sharding.shard1.hikari.connection-timeout=5s
app.sharding.shard1.hikari.idle-timeout=30s
app.sharding.shard1.hikari.max-lifetime=60s

app.sharding.shard1.latest=true
app.sharding.shard1.region=test-us-east-1
app.sharding.shard1.status=ACTIVE

# Shard 2 Configuration (Test Regular Shard)
app.sharding.shard2.master.url=jdbc:h2:mem:test_shard2_master;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
app.sharding.shard2.master.username=sa
app.sharding.shard2.master.password=
app.sharding.shard2.master.driver-class-name=org.h2.Driver

app.sharding.shard2.hikari.maximum-pool-size=8
app.sharding.shard2.hikari.minimum-idle=1
app.sharding.shard2.hikari.connection-timeout=5s

app.sharding.shard2.latest=false
app.sharding.shard2.region=test-us-west-2
app.sharding.shard2.status=ACTIVE

# Tenant Configuration
app.sharding.tenant-column-names=tenant_id,company_id
app.sharding.validation.strictness=STRICT

# Cache Configuration (Caffeine for testing - faster than Redis)
app.sharding.cache.enabled=true
app.sharding.cache.type=CAFFEINE
app.sharding.cache.ttl-hours=1
app.sharding.cache.max-size=1000
app.sharding.cache.record-stats=true

# Logging Configuration for Tests
logging.level.com.valarpirai.sharding=DEBUG
logging.level.org.springframework.cache=DEBUG
logging.level.com.zaxxer.hikari=WARN
logging.level.org.springframework.jdbc=WARN

# Spring Boot Test Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.h2.console.enabled=false